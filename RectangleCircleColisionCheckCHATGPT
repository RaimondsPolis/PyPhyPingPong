function rotatePoint(px, py, cx, cy, angle) {
    const dx = px - cx;
    const dy = py - cy;
    const cos = Math.cos(-angle);
    const sin = Math.sin(-angle);
    return {
        x: dx * cos - dy * sin + cx,
        y: dx * sin + dy * cos + cy
    };
}

function clamp(val, min, max) {
    return Math.max(min, Math.min(max, val));
}

function rectCircleCollision(rect, circle) {
    const local = rotatePoint(circle.x, circle.y, rect.x, rect.y, rect.angle);
    const hw = rect.width / 2;
    const hh = rect.height / 2;

    const closestX = clamp(local.x, rect.x - hw, rect.x + hw);
    const closestY = clamp(local.y, rect.y - hh, rect.y + hh);

    const dx = local.x - closestX;
    const dy = local.y - closestY;

    return (dx * dx + dy * dy) <= (circle.radius * circle.radius);
}

// Example usage:
const rect = { x: 100, y: 100, width: 60, height: 40, angle: Math.PI / 4 };
const circle = { x: 120, y: 110, radius: 15 };

if (rectCircleCollision(rect, circle)) {
    console.log("Collision!");
} else {
    console.log("No collision.");
}
